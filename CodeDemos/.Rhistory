circ = ggcirc(id, circular = TRUE, scalefix)
gg = ggarrange(flat, circ, ncol = 2)
return(gg)
}
#Winter
w_idx = c(9, 21, 24, 25, 28, 37,
39, 43,  54, 56, 64, 71,
82, 84, 85, 86, 90, 99, 103,  123,
134,  138, 144,  154, 158, 159,
165, 170,  177, 181,  190, 194,
199, 201, 212, 218, 220, 223,
243, 244, 257, 259)
# for(i in w_idx){
#
#   matchidx = match(birdids[i], bird_dict$AVIBASEID)
#   common = bird_dict$CommonName[matchidx]
#
#   paste0("Bird: ", common, ". ") %>% print
#
#   paste0("ebird19 observation count: ", ebird19counts$total[ebird19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("ebird22 observation count: ", ebird22counts$total[ebird22counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat19 observation count: ", inat19counts$total[inat19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat22 observation count: ", inat22counts$total[inat22counts$AVIBASEID == birdids[i]], ". ") %>% print
#
#
#   print(sidebysideplot(i))
# }
#Bufflehead
win_rep_idx = which(birdids == bird_dict[bird_dict$CommonName == "Bufflehead",]$AVIBASEID)
ggwin = sidebysideplot(win_rep_idx)
?ggarrange
ggsave("./img/winter_bufflehead.png", ggwin, width = 14, height = 7)
ggwin
library(cowplot)
sidebysideplot = function(id, scalefix = TRUE){
common = bird_dict$CommonName[match(id, bird_dict$AVIBASEID)]
flat = ggcirc(id, circular = FALSE, scalefix)
circ = ggcirc(id, circular = TRUE, scalefix)
gg = cowplot::plot_grid(flat, circ, ncol = 2, align = "h")
return(gg)
}
#Winter
w_idx = c(9, 21, 24, 25, 28, 37,
39, 43,  54, 56, 64, 71,
82, 84, 85, 86, 90, 99, 103,  123,
134,  138, 144,  154, 158, 159,
165, 170,  177, 181,  190, 194,
199, 201, 212, 218, 220, 223,
243, 244, 257, 259)
# for(i in w_idx){
#
#   matchidx = match(birdids[i], bird_dict$AVIBASEID)
#   common = bird_dict$CommonName[matchidx]
#
#   paste0("Bird: ", common, ". ") %>% print
#
#   paste0("ebird19 observation count: ", ebird19counts$total[ebird19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("ebird22 observation count: ", ebird22counts$total[ebird22counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat19 observation count: ", inat19counts$total[inat19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat22 observation count: ", inat22counts$total[inat22counts$AVIBASEID == birdids[i]], ". ") %>% print
#
#
#   print(sidebysideplot(i))
# }
#Bufflehead
win_rep_idx = which(birdids == bird_dict[bird_dict$CommonName == "Bufflehead",]$AVIBASEID)
ggwin = sidebysideplot(win_rep_idx)
ggsave("./img/winter_bufflehead.png", ggwin, width = 14, height = 7)
ggwin
knitr::opts_chunk$set(echo = TRUE)
library(arrow)
library(tidyverse)
library(magrittr)
library(ggpubr)
library(stringr)
library(rlang)
library(ggplot2); theme_set(theme_bw())
library(ggrepel)
library(googlesheets4)
library(dplyr)
library(plyr)
library(pracma)
library(tidyr)
library(kdensity)
library(circular)
library(fda)
library(cowplot)
rm(list=ls())
setwd("~/Desktop/repos/explorations_func_data")
#source("./0_birds_import_processing.R")
source("~/Desktop/repos/explorations_func_data/1_birds_counts_figures_tables.R")
#run 0_birds...
#run 1_birds...
sidebysideplot = function(id, scalefix = TRUE){
common = bird_dict$CommonName[match(id, bird_dict$AVIBASEID)]
flat = ggcirc(id, circular = FALSE, scalefix)
circ = ggcirc(id, circular = TRUE, scalefix)
gg = cowplot::plot_grid(flat, circ, ncol = 2, align = "h")
return(gg)
}
#Winter
w_idx = c(9, 21, 24, 25, 28, 37,
39, 43,  54, 56, 64, 71,
82, 84, 85, 86, 90, 99, 103,  123,
134,  138, 144,  154, 158, 159,
165, 170,  177, 181,  190, 194,
199, 201, 212, 218, 220, 223,
243, 244, 257, 259)
# for(i in w_idx){
#
#   matchidx = match(birdids[i], bird_dict$AVIBASEID)
#   common = bird_dict$CommonName[matchidx]
#
#   paste0("Bird: ", common, ". ") %>% print
#
#   paste0("ebird19 observation count: ", ebird19counts$total[ebird19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("ebird22 observation count: ", ebird22counts$total[ebird22counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat19 observation count: ", inat19counts$total[inat19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat22 observation count: ", inat22counts$total[inat22counts$AVIBASEID == birdids[i]], ". ") %>% print
#
#
#   print(sidebysideplot(i))
# }
#Bufflehead
win_rep_idx = which(birdids == bird_dict[bird_dict$CommonName == "Bufflehead",]$AVIBASEID)
ggwin = sidebysideplot(win_rep_idx)
ggsave("./img/winter_bufflehead.png", ggwin, width = 14, height = 7)
#Spring
spr_idx = c(15, 19, 33, 50, 51, 57, 61, 62, 67,
77, 87, 96, 100 , 108, 109, 110,  115, 128,
133,  151, 155, 166, 179, 192, 205, 206,
227, 245, 247, 258)
# for(i in spr_idx){
#
#   matchidx = match(birdids[i], bird_dict$AVIBASEID)
#   common = bird_dict$CommonName[matchidx]
#
#   paste0("Bird: ", common, ". ") %>% print
#
#   paste0("ebird19 observation count: ", ebird19counts$total[ebird19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("ebird22 observation count: ", ebird22counts$total[ebird22counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat19 observation count: ", inat19counts$total[inat19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat22 observation count: ", inat22counts$total[inat22counts$AVIBASEID == birdids[i]], ". ") %>% print
#
#
#   print(sidebysideplot(i))
# }
spr_rep_idx = which(birdids == bird_dict[bird_dict$CommonName == "Western Kingbird",]$AVIBASEID)
ggspr = sidebysideplot(spr_rep_idx)
ggsave("./img/spring_westernkingbird.png", ggspr, width = 14, height = 7)
#Summer
sum_idx = c(35, 45, 46, 55, 59, 63, 68,
80, 114, 117, 119, 141, 146,
147, 148, 152, 156, 161, 164, 169, 200,
211, 215, 217, 230,   240,
251, 256)
#
# for(i in sum_idx){
#
#   matchidx = match(birdids[i], bird_dict$AVIBASEID)
#   common = bird_dict$CommonName[matchidx]
#
#   paste0("Bird: ", common, ". ") %>% print
#
#   paste0("ebird19 observation count: ", ebird19counts$total[ebird19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("ebird22 observation count: ", ebird22counts$total[ebird22counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat19 observation count: ", inat19counts$total[inat19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat22 observation count: ", inat22counts$total[inat22counts$AVIBASEID == birdids[i]], ". ") %>% print
#
#
#   print(sidebysideplot(i))
# }
sum_rep_idx = which(birdids == bird_dict[bird_dict$CommonName == "Black-backed Woodpecker",]$AVIBASEID)
ggsum = sidebysideplot(sum_rep_idx)
ggsave("./img/summer_blackbackedwoodpecker.png", ggsum, width = 14, height = 7)
#Fall
f_idx = c(3,6, 18,  23, 29,  48, 65, 66, 69,
76,  116, 121, 124, 127,  131, 168,
172,  175,  180, 183, 235, 254)
# for(i in f_idx){
#
#   matchidx = match(birdids[i], bird_dict$AVIBASEID)
#   common = bird_dict$CommonName[matchidx]
#
#   paste0("Bird: ", common, ". ") %>% print
#
#   paste0("ebird19 observation count: ", ebird19counts$total[ebird19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("ebird22 observation count: ", ebird22counts$total[ebird22counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat19 observation count: ", inat19counts$total[inat19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat22 observation count: ", inat22counts$total[inat22counts$AVIBASEID == birdids[i]], ". ") %>% print
#
#
#   print(sidebysideplot(i))
# }
fall_rep_idx = which(birdids == bird_dict[bird_dict$CommonName == "American Pipit",]$AVIBASEID)
ggfall = sidebysideplot(fall_rep_idx)
ggsave("./img/fall_americanpipit.png", ggfall, width = 14, height = 7)
#Year round
yround_idx = c(7,11,13,17, 26, 27, 32, 34, 38, 40,44, 47,
49, 58, 70, 79, 81, 83, 94,  101, 104,
107, 111,  122, 129, 135, 137,
142, 145, 149,150,
157, 160, 163,
162, 167, 172, 173,178,
186, 188, 189, 193, 195,
196, 197, 203, 204, 207, 208, 210, 214, 221,
224, 225, 229, 231, 233,
234, 236, 237, 238, 239, 246,253)
for(i in yround_idx){
matchidx = match(birdids[i], bird_dict$AVIBASEID)
common = bird_dict$CommonName[matchidx]
paste0("Bird: ", common, ". ") %>% print
paste0("ebird19 observation count: ", ebird19counts$total[ebird19counts$AVIBASEID == birdids[i]], ". ") %>% print
paste0("ebird22 observation count: ", ebird22counts$total[ebird22counts$AVIBASEID == birdids[i]], ". ") %>% print
paste0("inat19 observation count: ", inat19counts$total[inat19counts$AVIBASEID == birdids[i]], ". ") %>% print
paste0("inat22 observation count: ", inat22counts$total[inat22counts$AVIBASEID == birdids[i]], ". ") %>% print
print(sidebysideplot(i))
}
yr_rep_idx = which(birdids == bird_dict[bird_dict$CommonName == "California Scrub-Jay",]$AVIBASEID)
ggyr = sidebysideplot(yr_rep_idx)
ggsave("./img/yr_cascrubjay.png", ggyr, width = 14, height = 7)
#bimodal
bimodal_idx = c(12, 14, 20, 22, 36, 52, 53,
60, 72, 88, 92, 95,
105, 106, 113, 126,
136, 143, 191, 198, 202, 209,
213,219, 226, 248,
249, 250, 252)
# for(i in bimodal_idx){
#
#   matchidx = match(birdids[i], bird_dict$AVIBASEID)
#   common = bird_dict$CommonName[matchidx]
#
#   paste0("Bird: ", common, ". ") %>% print
#
#   paste0("ebird19 observation count: ", ebird19counts$total[ebird19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("ebird22 observation count: ", ebird22counts$total[ebird22counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat19 observation count: ", inat19counts$total[inat19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat22 observation count: ", inat22counts$total[inat22counts$AVIBASEID == birdids[i]], ". ") %>% print
#
#
#   print(sidebysideplot(i))
# }
bimodal_rep_idx = which(birdids == bird_dict[bird_dict$CommonName == "Western Tanager",]$AVIBASEID)
ggbi = sidebysideplot(bimodal_rep_idx)
ggsave("./img/bi_westerntanager.png", ggbi, width = 14, height = 7)
#Anomalous
an_idx = c(4, 5, 8, 16, 30, 31, 41,
42, 73, 74, 75, 78, 89, 91,
93, 97, 98, 102, 112, 118,
120, 125, 130, 132, 139, 140,153, 174,
176, 182, 185,  186, 216, 222,
228, 232, 241, 242, 255 )
# for(i in an_idx){
#
#   matchidx = match(birdids[i], bird_dict$AVIBASEID)
#   common = bird_dict$CommonName[matchidx]
#
#   paste0("Bird: ", common, ". ") %>% print
#
#   paste0("ebird19 observation count: ", ebird19counts$total[ebird19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("ebird22 observation count: ", ebird22counts$total[ebird22counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat19 observation count: ", inat19counts$total[inat19counts$AVIBASEID == birdids[i]], ". ") %>% print
#   paste0("inat22 observation count: ", inat22counts$total[inat22counts$AVIBASEID == birdids[i]], ". ") %>% print
#
#
#   print(sidebysideplot(i))
# }
anom_rep_idx = which(birdids == bird_dict[bird_dict$CommonName == "Common Murre",]$AVIBASEID)
gganom = sidebysideplot(anom_rep_idx)
ggsave("./img/anom_commonmurre.png", gganom, width = 14, height = 7)
ggarrange(ggspr, ggsum, ggfall, ggwin)
ggarrange(ggspr, ggsum, ggfall, ggwin, nrow = 4)
ggstack = ggarrange(ggspr, ggsum, ggfall, ggwin, nrow = 4)
ggsave("./img/all_szn_rep.png", ggstack, width = 14, height = 7*4)
ggstack = cowplot::plot_grid(ggspr, ggsum, ggfall, ggwin, nrow = 4)
ggstack
ggsave("./img/all_szn_rep.png", ggstack, width = 14, height = 7*4)
> rm(list=ls())
rm(list=ls())
myFunc_21 <- function(arg_01) myFunc_22(arg_01)
myFunc_22 <- function(arg_02) myFunc_23(arg_02)
myFunc_23 <- function(arg_03) myFunc_24(arg_03)
myFunc_24 <- function(arg_04) "myString" + arg_04
myFunc_21()
myFunc_21()
myFunc_21()
myFunc_21()
myFunc_21("abc")
myFunc_21("abc")
myFunc_21(arg_01 = "abc")
rm(list=ls())
myFunc_21 <- function(arg_01) myFunc_22(arg_01)
myFunc_22 <- function(arg_02) myFunc_23(arg_02)
myFunc_23 <- function(arg_03) myFunc_24(arg_03)
myFunc_24 <- function(arg_04) cat("myString",arg_04)
myFunc_21()
myFunc_21(arg_01 = "_abc")
rm(list=ls())
myFunc_21 <- function(arg_01) myFunc_22(arg_01)
myFunc_22 <- function(arg_02) myFunc_23(arg_02)
myFunc_23 <- function(arg_03) myFunc_24(arg_03)
myFunc_24 <- function(arg_04) cat("myString", arg_04)
myFunc_21()
myFunc_21(arg_01 = "abc")
myFunc_21("abc")
rm(list=ls())
myFunc_21 <- function(arg_01) myFunc_22(arg_01)
myFunc_22 <- function(arg_02) myFunc_23(arg_02)
myFunc_23 <- function(arg_03) myFunc_24(arg_03)
myFunc_24 <- function(arg_04) cat("myString", arg_04)
myFunc_21()
rm(list=ls())
function.default = function(a = 1, b = 2){
a*b + 2
}
#assigning values to a and b sets the default
function.default()
function.default(2) #treats a to be 2 and b = 2
function.default(1, 5) #a = 1, b = 5
function.default(b = 3) #a = 1, b = 3
##writing arguments in terms of other arguments
function.default2 = function(a = 1, b = 5*a){
b/a
}
function.default2(10)
function.default2(100) #always gives 5 if b is not changed
function.default2(10, 20)
#what if arguments are missing?
#1)
function.missing1 = function(arg1, arg2){
arg1 + arg2
}
function.missing1(2) #throws an error (argument "arg2" is missing)
#2)
function.missing2 = function(arg1, arg2){
print(c(missing(arg1), missing(arg2)))
}
function.missing2(2) #key thing is that the "missing" statement
#2)
function.missing2 = function(arg1, arg2){
print(c(missing(arg1), missing(arg2)))
arg1 + arg2
}
function.missing2(2) #key thing is that the "missing" statement
function.missing3 = function(arg1, arg2){
vec = c(missing(arg1), missing(arg2)))
function.missing3(arg1 = 2, arg2 = 3)
function.missing3 = function(arg1, arg2){
vec = c(missing(arg1), missing(arg2)))
function.missing3 = function(arg1, arg2){
vec = c(missing(arg1), missing(arg2))
if(all(!vec)){ #makes sure both arguments are NOT missing
arg1 + arg2
}
}
function.missing3(arg1 = 2, arg2 = 3)
function.missing3(arg1 = 2)
function.missing3 = function(arg1, arg2){
vec = c(missing(arg1), missing(arg2))
if(all(!vec)){ #makes sure both arguments are NOT missing
arg1 + arg2
}else{
print("At least one of the arguments is missing!")
}
}
function.missing3(arg1 = 2, arg2 = 3)
function.missing3(arg1 = 2)
function.5 = function(a = ls()){
z = 10
a
}
function.5()
function.5(ls())
cars=data.frame(mtcars)
rows=function(df, firstrow, lastrow) {
df[firstrow:lastrow,]
}
rows(cars,1,2)
rows(df=cars,firstrow=3, lastrow=5)
rows(firstrow = 1, lastrow = 2, df = cars)
rows=function(df, firstrow, lastrow) {
df[firstrow:lastrow,]
}
library(codetools)
findGlobals(rows)
rows_of_iris=function(firstrow, lastrow) {
iris[firstrow:lastrow,]
}
rows_of_iris(firstrow = 1, lastrow = 3)
findGlobals(rows_of_iris)
rm(list=ls())
rm(list=ls())
myFunc_21 <- function(arg_01) myFunc_22(arg_01)
myFunc_22 <- function(arg_02) myFunc_23(arg_02)
myFunc_23 <- function(arg_03) myFunc_24(arg_03)
myFunc_24 <- function(arg_04) cat("myString", arg_04)
myFunc_21()
myFunc_21()
myFunc_21(arg_01 = "abc")
myFunc_21("abc")
rm(list=ls())
myFunc_31 <- function(arg_01) myFunc_32(arg_01)
myFunc_32 <- function(arg_02) myFunc_33(arg_02)
myFunc_33 <- function(arg_03) myFunc_34(arg_03)
myFunc_34 <- function(arg_04) 2 + arg_04
myFunc_31()
myFunc_31()
rm(list=ls())
myFunc_31 <- function(arg_01) myFunc_32(arg_01)
myFunc_32 <- function(arg_02) myFunc_33(arg_02)
myFunc_33 <- function(arg_03) myFunc_34(arg_03)
myFunc_34 <- function(arg_04) {
print("is my error here?")
2 + 5
print("how about here?")
5^2
print("maybe after this???")
2 + arg_04
}
myFunc_31()
myFunc_31()
myFunc_31()
myFunc_31()
rm(list=ls())
myFunc_25 <- function(z){
log(z)
print("Made it here")
}
myFunc_25(10)
myFunc_25 <- function(z){
print(log(z))
print("Made it here")
}
myFunc_25(10)
myFunc_25("abc")
myFunc_25 <- function(z){
try(log(z))
print("Made it here")
}
myFunc_25(10)
myFunc_25("abc")
myFunc_25 <- function(z){
print(log(z))
print("Made it here")
}
myFunc_25(10)
myFunc_25("abc")
show_condition <- function(code) {
tryCatch(code,
error = function(x) "myError",
warning = function(x) "myWarning",
message = function(x) "myMessage"
) }
show_condition <- function(code) {
tryCatch(code,
error = function(x) "You ran into an error!",
warning = function(x) "myWarning",
message = function(x) "myMessage"
) }
show_condition(stop("!!!!"))
show_condition <- function(code) {
tryCatch(code,
error = function(x) "You ran into an error!",
warning = function(x) return(0),
message = function(x) "myMessage"
) }
show_condition(warning("21u2hdkqwbfkjh"))
simulate = function(n, mu, sigma){
data = rnorm(n, mu, sigma)
return(list(mean = mean(data), sd = sd(data)))
}
simulate(50, 2, 1)
simulate = function(n, mu, sigma){
simulate = function(n, mu, sigma){
data = rnorm(n, mu, sigma)
return(list(mean = mean(data), sd = sd(data), sec_mom = mean(data^2)))
}
simulate(50, 2, 1)
simulate_muknown = function(n, mu, sigma){
data = rnorm(n, mu, sigma)
return(list(mu = mu,
mean = mean(data),
sec_mom = mean(data^2),
sigma2_mle = 1/n*sum((data-mu)^2)))
}
simulate_muknown(50, 4, 2)
3.5 + c(-1,1) *1.645 /2
simulate = function(n, mu, sigma){
data = rnorm(n, mu, sigma)
return(list(mean = mean(data), sd = sd(data), sec_mom = mean(data^2)))
}
simulate(100, 10, 2)
qchisq(0.025, 99)
qchisq(p = 0.025, df = 99)
qchisq(p = 0.975, df = 99)
qchisq(p = 0.025, df = 99)
qchisq(p = 0.975, df = 80)
100*2.1475^2 / 106.6
100*2.1475^2 / 73.3611
simulate_muknown = function(n, mu, sigma){
data = rnorm(n, mu, sigma)
return(list(mu = mu,
mean = mean(data),
sec_mom = mean(data^2),
sigma2_mle = 1/n*sum((data-mu)^2)))
}
simulate_muknown(61, 4, 3)
simulate_muknown(60, 4, 3)
qchisq(0.005, 60)
c(60*11.63874/qchisq(0.995, 60), 60*11.63874/qchisq(0.005, 60))
qchisq(0.995, 60)
